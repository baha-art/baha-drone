<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flappy Drone</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: skyblue;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: linear-gradient(skyblue, white);
    }
    #game-over, #start-screen, #game-win {
      position: absolute;
      top: 30%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 20px;
      text-align: center;
      border-radius: 10px;
      display: none;
    }
    #game-win {
      background: rgba(0, 128, 0, 0.8); /* yeÅŸil kazanÃ§ ekranÄ± */
    }
    #game-over h2, #start-screen h2, #game-win h2 {
      margin: 0 0 10px;
    }
  </style>
</head>
<body>

  <canvas id="gameCanvas" width="480" height="640"></canvas>

  <!-- BaÅŸlangÄ±Ã§ ekranÄ± -->
  <div id="start-screen">
    <h2>Flappy Drone</h2>
    <br>
    <img style="width: 70px; height: 35px;" src="resimler/dronesimge.png" alt="resim bulunamadÄ±">
    <p style="margin: 10px 0;">15 PuanÄ± Topla! YÃ¼zde 10 Ä°ndirimi Yakala!</p>
    <br>
    <button style="width: 100px; height: 30px;" id="start-button">BaÅŸla</button>
  </div>

  <!-- Kaybetme ekranÄ± -->
  <div id="game-over">
    <h2>Oyun Bitti</h2>
    <p>ðŸŽ¥ Reklam Ã§ekimi mi lazÄ±m?</p>
    <p><strong>Baha | Drone & Video</strong></p>
    <p>ðŸ“± +90 531 102 41 00</p>
    <p>ðŸ“¸ Instagram: @baha.tasarim</p>
    <button onclick="location.reload()">Yeniden Oyna</button>
  </div>

  <!-- Kazanma ekranÄ± -->
  <div id="game-win">
    <h2>Tebrikler! ðŸŽ‰</h2>
    <p>Ä°ndirim Kodu: <strong>DRONE10</strong></p>
    <button onclick="location.reload()">Yeniden Oyna</button>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    const droneImg = new Image();
    droneImg.src = "resimler/dronesimge.png";

    // Ses dosyalarÄ±
    const jumpSound = new Audio("sesler/jumpSound.mp3");
    const hitSound = new Audio("sesler/hitSound.mp3");
    const winSound = new Audio("sesler/winSound.mp3");

    jumpSound.volume = 0.2; // %50 ses seviyesi

    let drone = { x: 50, y: 150, width: 70, height: 35, gravity: 0.25, lift: -6, velocity: 0 };
    let pipes = [];
    let score = 0;
    let isGameOver = false;
    let isGameStarted = false;

    const startScreen = document.getElementById("start-screen");
    const startButton = document.getElementById("start-button");

    function drawDrone() {
      ctx.drawImage(droneImg, drone.x, drone.y, drone.width, drone.height);
    }

    function drawPipe(pipe) {
      ctx.fillStyle = "green";
      ctx.fillRect(pipe.x, 0, pipe.width, pipe.top);
      ctx.fillRect(pipe.x, canvas.height - pipe.bottom, pipe.width, pipe.bottom);
    }

    function resetGame() {
      pipes = [];
      score = 0;
      drone.y = 150;
      drone.velocity = 0;
      isGameOver = false;
      isGameStarted = true;
      startScreen.style.display = "none";
      document.getElementById("game-over").style.display = "none";
      document.getElementById("game-win").style.display = "none";
      loop();
    }

    function gameOver() {
      hitSound.play();
      isGameOver = true;
      isGameStarted = false;
      document.getElementById("game-over").style.display = "block";
    }

    function gameWin() {
      winSound.play();
      isGameOver = true;
      isGameStarted = false;
      document.getElementById("game-win").style.display = "block";
    }

    function loop() {
      if (isGameOver || !isGameStarted) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      drone.velocity += drone.gravity;
      drone.y += drone.velocity;

      if (drone.y + drone.height > canvas.height || drone.y < 0) {
        return gameOver();
      }

      drawDrone();

      if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - 200) {
        let top = 100 + Math.random() * 100;
        let gap = 180;
        let bottom = canvas.height - top - gap;
        pipes.push({ x: canvas.width, top, bottom, width: 60 });
      }

      for (let i = 0; i < pipes.length; i++) {
        let pipe = pipes[i];
        pipe.x -= 2;
        drawPipe(pipe);

        if (
          drone.x < pipe.x + pipe.width &&
          drone.x + drone.width > pipe.x &&
          (drone.y < pipe.top || drone.y + drone.height > canvas.height - pipe.bottom)
        ) {
          return gameOver();
        }

        if (!pipe.passed && pipe.x + pipe.width < drone.x) {
          pipe.passed = true;
          score++;
          if (score === 15) {
            return gameWin();
          }
        }
      }

      pipes = pipes.filter((p) => p.x + p.width > 0);

      ctx.fillStyle = "black";
      ctx.font = "24px sans-serif";
      ctx.fillText("Skor: " + score, 10, 30);

      requestAnimationFrame(loop);
    }

    startButton.addEventListener("click", resetGame);

    function jump() {
      if (isGameStarted) {
        drone.velocity = drone.lift;
        jumpSound.currentTime = 0;
        jumpSound.play();
      }
    }

    document.addEventListener("keydown", jump);
    document.addEventListener("touchstart", jump);

    droneImg.onload = () => {
      startScreen.style.display = "block";
    };
  </script>
</body>
</html>
